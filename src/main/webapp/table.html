<!DOCTYPE html>
<html style="height: 100%;background-image: linear-gradient(to bottom, rgba(84,98,114,0.74), rgba(30,41,56,0.74)), url(images/overlay.png);  ">
<head>
    <meta charset="utf-8"/>
    <title></title>
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap-table.css"/>
    <!--<link rel="stylesheet" type="text/css" href="assets/css/main.css"/>-->
    <style type="text/css">
        table th, table td {
            text-align: center;
        }

        body {
            /*background: linear-gradient(to bottom, rgba(84,98,114,0.74), rgba(30,41,56,0.74)) no-repeat;*/
            transition-delay: 0.75s;
            background-image: linear-gradient(to bottom, rgba(84, 98, 114, 0.74), rgba(30, 41, 56, 0.74)), url(images/overlay.png);
            /*background-size: auto, 256px 256px;*/
            /*background-position: center, center;*/
            background-repeat: no-repeat, repeat;
            z-index: -2;
            height: 100%;
        }

        .container {
            margin-top: 50px;
            /*height: 300px;*/
        }
    </style>

    <script src="bootstrap/js/jquery-3.0.0.js" type="text/javascript" charset="utf-8"></script>
    <script src="bootstrap/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="bootstrap/js/bootstrap-table.js" type="text/javascript" charset="utf-8"></script>
    <script src="bootstrap/js/bootstrap-table-export.js" type="text/javascript" charset="utf-8"></script>
    <script src="bootstrap/js/bootstrap-table-zh-CN.js" type="text/javascript" charset="utf-8"></script>
    <script src="bootstrap/js/tableExport.js" type="text/javascript" charset="utf-8"></script>
    <script src="bootstrap/js/ga.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
<div class="container">
    <a href="index_demo.html"><h1 class="btn btn-primary">返回首页</h1></a>
    <div id="toolbar">
        <button id="btn_add" type="button" class="btn btn-default" data-target="#add" data-toggle="modal">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新增
        </button>
        <button id="btn_edit" type="button" class="btn btn-default" data-target="#edit" data-toggle="modal">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>修改
        </button>
    </div>
    <table id="table_show"
           data-show-export="true">
        <thead>
        <tr>
            <th>CheckBox</th>
            <th data-field="id">ID</th>
            <th data-field="sex">性别</th>
            <th data-field="univercity">学校</th>
            <th data-field="start_time">入学年</th>
            <th data-field="jvalue">J值</th>
        </tr>
        </thead>
    </table>
</div>
<!-- BG -->
<div id="bg" style="z-index: -1"></div>

<!--增加-->
<div class="modal fade" id="add" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="addLable">新增</h4>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <span class="input-group-addon" id="add_sex_lable">性别</span>
                    <input type="text" class="form-control" placeholder="sex" aria-describedby="add_sex" id="add_sex">
                </div>
                <br/>
                <div class="input-group">
                    <span class="input-group-addon" id="add_school_lable">学校</span>
                    <input type="text" class="form-control" placeholder="school" aria-describedby="add_school"
                           id="add_school">
                </div>
                <br/>
                <div class="input-group">
                    <span class="input-group-addon" id="add_year_lable">入学年</span>
                    <input type="text" class="form-control" placeholder="school" aria-describedby="add_school"
                           id="add_year">
                </div>
                <br/>
                <div class="input-group">
                    <span class="input-group-addon" id="add_j_lable">J值</span>
                    <input type="text" class="form-control" placeholder="J值" aria-describedby="add_j" id="add_j">
                </div>
                <br/>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="add_message()">提交更改</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>

<!--修改-->
<div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="editLable">修改</h4>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <span class="input-group-addon" id="edit_sex_lable">性别</span>
                    <input type="text" class="form-control" placeholder="sex" aria-describedby="edit_sex" id="edit_sex">
                </div>
                <br/>
                <div class="input-group">
                    <span class="input-group-addon" id="edit_school_lable">学校</span>
                    <input type="text" class="form-control" placeholder="school" aria-describedby="edit_school"
                           id="edit_school">
                </div>
                <br/>
                <div class="input-group">
                    <span class="input-group-addon" id="edit_year_lable">入学年</span>
                    <input type="text" class="form-control" placeholder="school" aria-describedby="edit_school"
                           id="edit_year">
                </div>
                <br/>
                <div class="input-group">
                    <span class="input-group-addon" id="edit_j_lable">J值</span>
                    <input type="text" class="form-control" placeholder="J值" aria-describedby="edit_j" id="edit_j">
                </div>
                <br/>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="edit_message()">提交更改</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<script>
    function add_message() {
        // alert("确认添加？")
        var add_sex = $('#add_sex').val();
        var add_school = $('#add_school').val();
        var add_year = $('#add_year').val();
        var add_j = $('#add_j').val();

        // 向后台传输数据
        $.ajax({
            type: "GET",
            url: "/add",//URL是你接受请求的路径
            processData: false,
            data: {
                "add_sex": add_sex, "add_school": add_school, "add_year": add_year, "add_j": add_j
            },//传输的数据
            dataType: "json",
            success: function (data) {
                console.log("success!");
            }
        });

    }

    function edit_message() {

        var edit_sex = $('#edit_sex').val();
        var edit_school = $('#edit_school').val();
        var edit_year = $('#edit_year').val();
        var edit_j = $('#edit_j').val();

        // 想后台传输数据
        $.ajax({
            type: "GET",
            url: "/edit",//URL是你接受请求的路径
            processData: false,
            data: {
                "edit_sex": edit_sex, "edit_school": edit_school, "edit_year": edit_year, "edit_j": edit_j
            },//传输的数据
            dataType: "json",
            success: function (data) {
                console.log("success!");
            }
        });

    }
</script>
<script>
    var $table = $('#table');
    $(function () {
        $('#toolbar').find('select').change(function () {
            console.log($(this).val())
            $table.bootstrapTable('destroy').bootstrapTable({
                exportDataType: $(this).val()
            });
        });
    })


    function exportData() {
        $('#table').tableExport({
            type: 'excel',
            fileName: "图表",
            excelstyles: ['border-bottom', 'border-top', 'border-left', 'border-right']
        });
    }

    $('#table_show').bootstrapTable({
        url: "univercity_list.action",
        toolbar: '#toolbar',
        method: 'post',
        showRefresh: true,
        clickToSelect: true,
        sortable: true, //是否启用排序
        sortOrder: "asc", //排序方式
        pagination: true,
        selectItemName: 'btSelectItem',
        search: true,
        searchOnEnterKey: true,
        showHeader: true,
        showColumns: true,
        showToggle: true,
        contentType: 'application/x-www-form-urlencoded',
        sidePagination: "server",
        columns: [
            {
                checkbox: true
            }, {
                field: 'id',
                title: 'ID'
            }, {
                field: 'sex',
                title: '性别'
            }, {
                field: 'univercity',
                title: '学校'
            }, {
                field: 'start_time',
                title: '入学年'
            }, {
                field: 'jvalue',
                title: 'J值'
            }
        ]
    });
</script>
